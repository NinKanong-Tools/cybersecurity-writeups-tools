# fping

![fping-logo](https://github.com/user-attachments/assets/c4e33bc3-8829-4e99-9cb5-1863f72f7e04)


### What is fping?
fping is a program to send ICMP echo probes to network hosts, similar to ping, but much better performing when pinging multiple hosts. fping has a very long history: Roland Schemers did publish a first version of it in 1992 and it has established itself since then as a standard tool for network diagnostics and statistics.

### LAB Tool
Kali Linux
metasploitable2


### 1. Installation
````
sudo apt install fping
````
<img width="750" height="224" alt="image" src="https://github.com/user-attachments/assets/57011450-2b81-4f8b-aa09-a52934505d35" />

Somehow in kali it already install.



## Usage:
| Option               | Use                              |
| -------------------- | -------------------------------- |
| `-g`                 | Generate IP range                |
| `-a`                 | Show alive hosts only            |
| `-u`                 | Show unreachable hosts only      |
| `-c N`               | Number of ping attempts per host |
| `-t N`               | Timeout in ms                    |
| `-p N`               | Delay between pings in ms        |
| `< file` / `-f file` | Read hosts from file             |
| `-D`                 | Show timestamp                   |
| `-6`                 | IPv6 addresses                   |
| `-v`                 | Verbose output                   |

### 2. Ping a Single Host
````
fping 192.168.127.129
````
<img width="248" height="129" alt="image" src="https://github.com/user-attachments/assets/d7738317-caad-48cf-8e6c-0594f2965698" />

- This command uses the fping tool to test the reachability of the IP address 192.168.127.129, typically a local network device.

### 3. Ping Multiple Hosts
````
fping 192.168.127.127 192.168.127.129 192.168.127.30
````
<img width="709" height="237" alt="image" src="https://github.com/user-attachments/assets/6362968b-3e15-4b4d-83d8-d610b6484cbf" />

- This command use to send ICMP echo requests (pings) to three IP addresses.


### 4. Scan a Range
````
fping -g 192.168.127.1 192.168.127.254
````
<img width="649" height="423" alt="image" src="https://github.com/user-attachments/assets/cacc17fe-a844-4cb8-8c96-4f3e60c5edfc" />

- `-g` : generate range.
- Scans an entire subnet quickly.

### 5. Read Hosts from a File
````
nano hosts.txt
````
<img width="221" height="47" alt="image" src="https://github.com/user-attachments/assets/944ba853-0529-4a91-b2d7-1904fa37e8c9" />

````
192.168.127.2
192.168.127.128
192.168.127.129
````
<img width="506" height="255" alt="image" src="https://github.com/user-attachments/assets/ebf84322-63ea-43db-8019-0fbe24947545" />

````
fping < hosts.txt
````
<img width="313" height="110" alt="image" src="https://github.com/user-attachments/assets/814d3326-b3bb-4e3e-b438-8d699c2f53e9" />


### 6. Show Only Alive or Unreachable Hosts
````
fping -a -g 192.168.127.2 192.168.127.128
````
<img width="651" height="479" alt="image" src="https://github.com/user-attachments/assets/d4178e21-d1cc-49dd-a570-1fcbedbdabf7" />

- This command and use to scan a range of IP addresses to see which ones are alive (responding to ping).

````
fping -u -g 192.168.127.2 192.168.127.128
````
<img width="649" height="423" alt="image" src="https://github.com/user-attachments/assets/682ff3a3-ee46-415a-bee5-1a759efda5e2" />

- this command uses the fping tool to ping a range of IP addresses and identify unreachable hosts.
- `-a` : Show only alive hosts (quiet mode: suppress output for unreachable ones).
- `-u` : Show only unreachable (or unknown) hosts.
- `-g` : Generate a range of IPs for scanning (subnet or start/end range).


### 7. Ping Multiple Times
````
fping -c 3 192.168.127.129
````
<img width="587" height="143" alt="image" src="https://github.com/user-attachments/assets/4630840a-36b0-4b2d-b2c2-8219c75d6f14" />

- uses the fping tool to ping the IP address 192.168.127.129 a specified number of times.
- `-c 3` : This option specifies the number of ICMP Echo Requests to send to the target.


### 8. Set Timeout per Ping
````
fping -t 1000 192.168.127.129
````
<img width="296" height="80" alt="image" src="https://github.com/user-attachments/assets/763c8f81-a01d-4b7f-8999-8bad291c9822" />

- uses the fping tool to ping the IP address 192.168.127.129 with a specified timeout.
- `-t 1000` : This option sets the timeout (in milliseconds) for each ICMP Echo Request.


### 9. Adjust Delay Between Pings
````
fping -p 50 -g 192.168.127.1 192.168.127.150
````
<img width="640" height="361" alt="image" src="https://github.com/user-attachments/assets/83b7b54b-24a7-411c-b943-e6ad00fdf0cf" />

- This command uses the fping tool to ping a range of IP addresses with a specified delay between pings.
- `-p 50` : This option sets the delay (in milliseconds) between sending successive pings to different targets within the range.


### 10. Save Results to a File
````
fping -a -g 192.168.127.1 192.168.127.130 > alive_hosts.txt
````
<img width="639" height="287" alt="image" src="https://github.com/user-attachments/assets/3d2a2d69-e886-4372-8b87-460c4c26afff" />

- check it
````
cat alive_hosts.txt
````
<img width="235" height="99" alt="image" src="https://github.com/user-attachments/assets/ef0015e6-7b43-420d-8cb3-bff84043a888" />


### 11. Pentest and Network Mapping
#### 1. Continuous Monitoring
````
fping -D -g 192.168.127.1 192.168.127.130
````
<img width="649" height="449" alt="image" src="https://github.com/user-attachments/assets/769e24be-68cc-4990-9494-446673ec7d33" />

- This command uses the fping tool to ping a range of IP addresses with timestamp debugging enabled.
- `-D` : enables timestamp debugging, adding a timestamp to each line of output.


#### 2. Flood Mode (Fastest Discovery)
````
fping -f hosts.txt
````
<img width="219" height="116" alt="image" src="https://github.com/user-attachments/assets/9c75dbe0-c5df-4e6a-9a63-8e7037912050" />

- This command uses the fping tool to ping a list of target hosts specified in a file named hosts.txt.
- `-f hosts.txt` : This option tells fping to read a list of target IP addresses or hostnames from a file named hosts.txt


#### 3. IPv6 Support
````
fping -f fe80::20c:29ff:fe0a:46c1
````
<img width="326" height="103" alt="image" src="https://github.com/user-attachments/assets/2a376e6c-dd5b-41d4-8572-edb8e7494ab8" />

<img width="702" height="376" alt="image" src="https://github.com/user-attachments/assets/eec9e29a-c3d9-43dc-ab2a-aa07be9180b2" />

this IPV6 is my metasploitable2.
- `-6` : IPV6,


#### 4. Combine Options for Efficient Subnet Scanning
````
fping -a -g 192.168.127.1 192.168.127.130 -t 500 -p 20 > alive_hosts.txt
````
<img width="645" height="546" alt="image" src="https://github.com/user-attachments/assets/5e08f37d-38b9-4c6d-936d-29551b5e009a" />

- This command ses the fping tool to ping a range of IP addresses, filter for alive hosts, and save the results to a file.
- `-a` : This option tells fping to display only the alive hosts (those that respond to ICMP Echo Requests).
- `-p 20` : This option sets the delay (in milliseconds) between sending successive pings to different targets within the range.


### 12. Host Discovery Workflow for Pentesters
#### 1. Scan subnet for alive hosts
````
fping -a -g 192.168.127.1 192.168.127.130 > alive_hosts.txt
````
<img width="640" height="440" alt="image" src="https://github.com/user-attachments/assets/da51b860-78dd-49fa-88f1-9407a08dea88" />

check:
````
cat alive_hosts.txt
````
<img width="289" height="129" alt="image" src="https://github.com/user-attachments/assets/9f5cd109-a704-4147-b8fa-4bb68b9f7877" />


#### 2. Use Nmap to scan ports on alive hosts
````
nmap -iL alive_hosts.txt -sS -p 1-65535
````
<img width="543" height="717" alt="image" src="https://github.com/user-attachments/assets/edfef8d0-da54-444c-8906-b36712dfa60a" />

<img width="533" height="121" alt="image" src="https://github.com/user-attachments/assets/e198623d-a503-45fa-9051-00fa22620625" />


#### 3. Feed results into vulnerability scanners like Nessus/OpenVAS.


In this we will do it letter.


### 13. I used AI to assists me to create a script about `fping` to make it better and easy to use:
````
#!/usr/bin/env python3

import subprocess
import ipaddress
import argparse
import sys
import os
from datetime import datetime

def ping_host(ip):
    """
    Ping a single IP address and return True if alive.
    Uses system ping with 1 packet and short timeout.
    """
    try:
        if os.name == 'nt': 
            result = subprocess.run(
                ['ping', '-n', '1', '-w', '1000', str(ip)],
                stdout=subprocess.PIPE,
                stderr=subprocess.PIPE,
                text=True
            )
        else:  
            result = subprocess.run(
                ['ping', '-c', '1', '-W', '1', str(ip)],
                stdout=subprocess.PIPE,
                stderr=subprocess.PIPE,
                text=True
            )
        return result.returncode == 0
    except Exception as e:
        print(f"Error pinging {ip}: {e}")
        return False

def scan_ip_range(start_ip, end_ip, output_file=None):
    """
    Scan a range of IPs from start_ip to end_ip.
    Reports live and unreachable hosts.
    """
    try:
        start = ipaddress.IPv4Address(start_ip)
        end = ipaddress.IPv4Address(end_ip)
    except ipaddress.AddressValueError as e:
        print(f"Invalid IP address: {e}")
        return

    alive_hosts = []
    unreachable_hosts = []

    print(f"Scanning IP range: {start} to {end}...")
    total_ips = int(end) - int(start) + 1
    print(f"Total IPs to scan: {total_ips}\n")

    for ip_int in range(int(start), int(end) + 1):
        ip = ipaddress.IPv4Address(ip_int)
        print(f"Pinging {ip}...", end=" ")
        if ping_host(ip):
            print("Alive")
            alive_hosts.append(str(ip))
        else:
            print("No response")
            unreachable_hosts.append(str(ip))

    print("\nScan Complete!")
    print("\nAlive Hosts:")
    if alive_hosts:
        for host in alive_hosts:
            print(f"  {host}")
    else:
        print("  No live hosts found.")

    print("\nUnreachable Hosts (first 20):")
    if unreachable_hosts:
        for host in unreachable_hosts[:20]:
            print(f"  {host}")
        if len(unreachable_hosts) > 20:
            print(f"  ... and {len(unreachable_hosts) - 20} more.")
    else:
        print("  All hosts responded!")

    if output_file:
        with open(output_file, 'w') as f:
            f.write(f"Network Scan Report\n")
            f.write(f"Range: {start} - {end}\n")
            f.write(f"Date: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}\n")
            f.write(f"Total IPs: {total_ips}\n")
            f.write("\n--- Alive Hosts ---\n")
            f.write("\n".join(alive_hosts) if alive_hosts else "No live hosts.")
            f.write("\n\n--- Unreachable Hosts (first 30) ---\n")
            f.write("\n".join(unreachable_hosts[:30]) if unreachable_hosts else "All hosts responded.")
            if len(unreachable_hosts) > 30:
                f.write(f"\n... and {len(unreachable_hosts) - 30} more.\n")
        print(f"\nReport saved to: {output_file}")

if __name__ == "__main__":
    parser = argparse.ArgumentParser(description="Simple IP Scanner using ICMP ping.")
    parser.add_argument("start_ip", help="Start IP address (e.g. 192.168.1.1)")
    parser.add_argument("end_ip", help="End IP address (e.g. 192.168.1.50)")
    parser.add_argument("-o", "--output", help="Save results to a file")

    args = parser.parse_args()

    try:
        scan_ip_range(args.start_ip, args.end_ip, args.output)
    except KeyboardInterrupt:
        print("\n\nScan interrupted by user. Exiting gracefully.")
        sys.exit(0)
````
<img width="722" height="560" alt="image" src="https://github.com/user-attachments/assets/c0714075-98b8-4a2b-afa7-ecae7abf3309" />

- In this i run it in VSCode cause it easy to use than CLI.


### =============>>>> End of fping

### credit
1. https://netbeez.net/blog/linux-how-to-use-fping/


### Practice in LAB BY: Nin Kanong(k4n0ng)

#### Date: 28/Aug/2025
